<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description"
	content="Furrever admin is super flexible, powerful, clean &amp; modern responsive bootstrap 5 admin template with unlimited possibilities.">
<meta name="keywords"
	content="admin template, Furrever admin template, dashboard template, flat admin template, responsive admin template, web app">
<meta name="author" content="Tha102G3">
<link rel="icon" href="assets/images/favicon.png" type="image/x-icon">
<link rel="shortcut icon" href="assets/images/favicon.png"
	type="image/x-icon">
<title>Furrever - Profile Setting</title>
<link
	href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
	rel="stylesheet">
<link rel="stylesheet" href="/assets/css/linearicon.css">
<link rel="stylesheet" type="text/css" href="assets/css/remixicon.css">
<link rel="stylesheet" type="text/css"
	href="assets/css/vendors/font-awesome.css">
<link rel="stylesheet" type="text/css"
	href="assets/css/vendors/themify.css">
<link rel="stylesheet" type="text/css"
	href="assets/css/vendors/feather-icon.css">
<link rel="stylesheet" type="text/css" href="assets/css/select2.min.css">
<link rel="stylesheet" type="text/css"
	href="assets/css/vendors/scrollbar.css">
<link rel="stylesheet" type="text/css"
	href="assets/css/vendors/animate.css">
<link rel="stylesheet" type="text/css"
	href="assets/css/vendors/chartist.css">
<link rel="stylesheet" type="text/css"
	href="assets/css/vendors/bootstrap.css">
<link rel="stylesheet" type="text/css"
	href="assets/css/vendors/bootstrap-tagsinput.css">
<link rel="stylesheet" type="text/css" href="assets/css/style.css">

<style>
body {
  font-family: "Arial", "Microsoft JhengHei", sans-serif;
}
</style>


</head>

<body>
	<div class="tap-top">
		<span class="lnr lnr-chevron-up"></span>
	</div>

	<div class="page-wrapper compact-wrapper" id="pageWrapper">
		<div class="page-header">
			<div class="header-wrapper m-0">
				<div class="header-logo-wrapper p-0">
					<div class="logo-wrapper">
						<a href="back_index.jsp"> 
							<img class="img-fluid main-logo" src="assets/images/logo/1.png" alt="logo"> 
							<img
							class="img-fluid white-logo" src="assets/images/logo/1-white.png"
							alt="logo">
						</a>
					</div>
					<div class="toggle-sidebar">
						<i class="status_toggle middle sidebar-toggle"
							data-feather="align-center">
						</i> 
						<a href="back_index.jsp"> 
							<img src="assets/images/logo/1.png" class="img-fluid" alt="">
						</a>
					</div>
				</div>

				<div class="nav-right col-6 pull-right right-header p-0">
					<ul class="nav-menus">
						<li><span class="header-search"> <i
								class="ri-search-line"></i>
						</span></li>

						<li class="profile-nav onhover-dropdown pe-0 me-0">
							<ul class="profile-dropdown onhover-show-div">
								<li><a href="order-list.html"> <i
										data-feather="archive"></i> <span>訂單</span>
								</a></li>
								<li><a href="profile-setting.html"> <i
										data-feather="settings"></i> <span>設置</span>
								</a></li>
								<li>
									<a data-bs-toggle="modal" id="logoutLink">
											<i data-feather="log-out"></i> <span>登出</span>
									</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>

		<div class="page-body-wrapper">
			<div class="sidebar-wrapper">
				<div id="sidebarEffect"></div>
				<div>
					<div class="logo-wrapper logo-wrapper-center">
						<a href="back_index.jsp" data-bs-original-title="" title=""> <img
							class="img-fluid for-white"
							src="assets/images/logo/full-white.png" alt="logo">
						</a>
						<div class="back-btn">
							<i class="fa fa-angle-left"></i>
						</div>
					</div>
					<div class="logo-icon-wrapper">
						<a href="back_index.jsp"> <img
							class="img-fluid main-logo main-white"
							src="assets/images/logo/1-white.png" alt="logo"> <img
							class="img-fluid main-logo main-dark"
							src="assets/images/logo/logo-white.png" alt="logo">
						</a>
					</div>
					<nav class="sidebar-main">
						<div class="left-arrow" id="left-arrow">
							<i data-feather="arrow-left"></i>
						</div>

						<div id="sidebar-menu">
							<ul class="sidebar-links" id="simple-bar">
								<li class="back-btn"></li>

								<li class="sidebar-list"><a
									class="sidebar-link sidebar-title link-nav"
									href="back_index.jsp"> <i class="ri-home-line"></i> <span>主頁</span>
								</a></li>

								<li class="sidebar-list"><a
									class="linear-icon-link sidebar-link sidebar-title"
									href="javascript:void(0)"> <i class="ri-store-3-line"></i>
										<span>產品</span>
								</a>
									<ul class="sidebar-submenu">
										<li><a href="products.jsp">所有產品</a></li>

										<li><a href="add-new-product.jsp">添加產品</a></li>
									</ul></li>

								<li class="sidebar-list"><a
									class="sidebar-link sidebar-title" href="javascript:void(0)">
										<i class="ri-archive-line"></i> <span>訂單</span>
								</a>
									<ul class="sidebar-submenu">
										<li><a href="order-list.html">訂單列表</a></li>
										<li><a href="order-list2.html">團購訂單</a></li>
									</ul></li>

								<li class="sidebar-list"><a
									class="linear-icon-link sidebar-link sidebar-title"
									href="javascript:void(0)"> <i class="ri-settings-line"></i>
										<span>編輯</span>
								</a>
									<ul class="sidebar-submenu">
										<li><a href="profile-setting.html"> 個人設定</a></li>
									</ul></li>
							</ul>
						</div>

						<div class="right-arrow" id="right-arrow">
							<i data-feather="arrow-right"></i>
						</div>
					</nav>
				</div>
			</div>

			<div class="page-body">
				<div class="container-fluid">
					<div class="row">
						<div class="col-12">
							<div class="row">
								<div class="col-sm-12">
									<div class="card">
										<div class="card-body">
											<div class="title-header option-title">
												<h5>廠商資訊</h5>
											</div>
											<form class="theme-form theme-form-2 mega-form">
												<div class="row">
													<div class="mb-4 row align-items-center">
														<label class="form-label-title col-sm-2 mb-0">廠商名稱</label>
														<div class="col-sm-10">
															<input id="m_name" class="form-control" type="text"
																placeholder="輸入廠商名稱">
														</div>
													</div>

													<div class="mb-4 row align-items-center">
														<label class="form-label-title col-sm-2 mb-0">統一編號</label>
														<div class="col-sm-10">
															<input id="m_gui" class="form-control" type="text"
																placeholder="輸入統一編號">
														</div>
													</div>

													<div class="mb-4 row align-items-center">
														<label class="form-label-title col-sm-2 mb-0">銀行帳號</label>
														<div class="col-sm-10">
															<input id="m_bank_id" class="form-control" type="text"
																placeholder="輸入銀行帳號">
														</div>
													</div>

													<div class="mb-4 row align-items-center">
														<label class="form-label-title col-sm-2 mb-0">廠商地址</label>
														<div class="col-sm-10">
															<input id="m_address" class="form-control" type="text"
																placeholder="輸入地址">
														</div>
													</div>

													<div class="mb-4 row align-items-center">
														<label class="form-label-title col-sm-2 mb-0">輸入手機</label>
														<div class="col-sm-10">
															<input id="m_phone" class="form-control" type="text"
																placeholder="輸入電話">
														</div>
													</div>

													<div class="mb-4 row align-items-center">
														<label class="form-label-title col-sm-2 mb-0">身分證字號</label>
														<div class="col-sm-10">
															<input id="m_man_id" class="form-control" type="text"
																placeholder="輸入身分證">
														</div>
													</div>

													<div class="mb-4 row align-items-center">
														<label class="form-label-title col-sm-2 mb-0">聯絡人名稱</label>
														<div class="col-sm-10">
															<input id="m_man_name" class="form-control" type="text"
																placeholder="輸入名稱">
														</div>
													</div>

													<div class="mb-4 row align-items-center">
														<label class="form-label-title col-sm-2 mb-0">電子信箱</label>
														<div class="col-sm-10">
															<input id="m_email" class="form-control" type="email"
																placeholder="輸入電子信箱">
														</div>
													</div>

													<div class="button-box">
														<button type="button" class="btn  btn--yes btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop" href="javascript:void(0)" onclick="updateForm()">修改</button>
													</div>
												</div>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="container-fluid">
			<footer class="footer">
				<div class="row">
					<div class="col-md-12 footer-copyright text-center">
						<p class="mb-0">Copyright 2022 © FURREVER theme by THA102G3</p>
					</div>
				</div>
			</footer>
		</div>
	</div>

	<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static"
		data-bs-keyboard="false" tabindex="-1"
		aria-labelledby="staticBackdropLabel" aria-hidden="true">
		<div class="modal-dialog  modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-body">
					<h5 class="modal-title" id="staticBackdropLabel">修改完成</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
					<div class="button-box">
						<button id="yesButton" type="button" class="btn  btn--yes btn-primary">Yes</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="assets/js/jquery-3.6.0.min.js"></script>
	<script src="assets/js/scrollbar/simplebar.js"></script>
	<script src="assets/js/scrollbar/custom.js"></script>
	<script src="assets/js/config.js"></script>
	<script src="assets/js/sidebar-menu.js"></script>
	<script src="assets/js/dropzone/dropzone.js"></script>
	<script src="assets/js/dropzone/dropzone-script.js"></script>
	<script src="assets/js/notify/bootstrap-notify.min.js"></script>
	<script src="assets/js/script.js"></script>
	<script src="assets/js/bootstrap/bootstrap.bundle.min.js"></script>
	<script src="assets/js/icons/feather-icon/feather.min.js"></script>
	<script src="assets/js/icons/feather-icon/feather-icon.js"></script>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
	<script>
		function init() {
 			var path = window.location.pathname;
 			var webCtx = path.substring(0, path.indexOf('/', 1));

			$.ajax({
				url : "http://"+window.location.host+webCtx+"/mas.do",
				type : "POST",
				data : {
					"action" : "getOneSearch",
					"m_id" : "1"
				},
				dataType : "json",

				success : function(data) {

					var parsedData = JSON.parse(data);
					let m_id = parsedData.m_id;
					let m_name = decodeURIComponent(parsedData.m_name);
// 					let m_name = parsedData.m_name;
					let m_gui = parsedData.m_gui;
					let m_bank_id = parsedData.m_bank_id;
					let m_address = decodeURIComponent(parsedData.m_address);
// 					let m_address = parsedData.m_address;
					let m_man_id = parsedData.m_man_id;
					let m_man_name = parsedData.m_man_name;
					let m_email = parsedData.m_email;
					let m_phone = parsedData.m_phone;

					document.getElementById("m_gui").value = m_gui;
					document.getElementById("m_name").value = m_name;
					document.getElementById("m_bank_id").value = m_bank_id;
					document.getElementById("m_address").value = m_address;
					document.getElementById("m_man_id").value = m_man_id;
					document.getElementById("m_man_name").value = m_man_name;
					document.getElementById("m_email").value = m_email;
					document.getElementById("m_phone").value = m_phone;

				},
				error : function(xhr) {
					console.log(xhr);
				},
				complete : function(xhr) {
					console.log(xhr);
				}
			});
		}
		init();

		
		
		function validateForm() {
		  var m_name = document.getElementById("m_name").value;
		  var m_gui = document.getElementById("m_gui").value;
		  var m_bank_id = document.getElementById("m_bank_id").value;
		  var m_address = document.getElementById("m_address").value;
		  var m_man_id = document.getElementById("m_man_id").value;
		  var m_man_name = document.getElementById("m_man_name").value;
		  var m_email = document.getElementById("m_email").value;
		  var m_phone = document.getElementById("m_phone").value;

		  if (m_name === "") {
		    alert("請輸入廠商名稱");
		    return;
		  }

		  if (m_gui === "") {
		    alert("請輸入統一編號");
		    return;
		  }

		  if (m_bank_id === "") {
		    alert("請輸入銀行帳號");
		    return;
		  }
		  
		  if (m_address === "") {
		    alert("請輸入地址");
		    return;
		  }
		  
		  if (m_man_id === "") {
		    alert("請輸入身分證字號");
		    return;
		  }
		  
		  if (m_man_name === "") {
		    alert("請輸入聯絡人姓名");
		    return;
		  }
		  
		  if (m_email === "") {
		    alert("請輸入電子郵件");
		    return;
		  }
		  
		  if (m_phone === "") {
		    alert("請輸入手機");
		    return;
		  }
		}

		document.getElementById("m_name").addEventListener("keydown", function(event) {
		  if (event.key === "Enter") {
		    event.preventDefault();
		    validateForm();
		  }
		});
		
		document.getElementById("m_gui").addEventListener("keydown", function(event) {
		  if (event.key === "Enter") {
		    event.preventDefault();
		    validateForm();
		  }
		});
		
		document.getElementById("m_bank_id").addEventListener("keydown", function(event) {
		  if (event.key === "Enter") {
		    event.preventDefault();
		    validateForm();
		  }
		});
		
		document.getElementById("m_address").addEventListener("keydown", function(event) {
		  if (event.key === "Enter") {
		    event.preventDefault();
		    validateForm();
		  }
		});
		
		document.getElementById("m_man_id").addEventListener("keydown", function(event) {
		  if (event.key === "Enter") {
		    event.preventDefault();
		    validateForm();
		  }
		});
		
		document.getElementById("m_man_name").addEventListener("keydown", function(event) {
		  if (event.key === "Enter") {
		    event.preventDefault(); 
		    validateForm();
		  }
		});
		
		document.getElementById("m_email").addEventListener("keydown", function(event) {
		  if (event.key === "Enter") {
		    event.preventDefault();
		    validateForm();
		  }
		});
		
		document.getElementById("m_phone").addEventListener("keydown", function(event) {
		  if (event.key === "Enter") {
		    event.preventDefault();
		    validateForm();
		  }
		});

		document.getElementById("yesButton").addEventListener("click", function() {
		  location.reload();
		});
		
		document.getElementById("logoutLink").addEventListener("click", function() {
		  window.location.href = "back_index.jsp";
		});
		

		function updateForm() {

            let m_id = "1";
            let m_name = document.getElementById("m_name").value;
            let m_gui = document.getElementById("m_gui").value;
            let m_bank_id = document.getElementById("m_bank_id").value;
            let m_address = document.getElementById("m_address").value;
            let m_man_id = document.getElementById("m_man_id").value;
            let m_man_name = document.getElementById("m_man_name").value;
            console.log(document.getElementById("m_email").value);
            let m_email = document.getElementById("m_email").value;
            let m_phone = document.getElementById("m_phone").value;

            $.ajax({
                url: "http://localhost:8081/TirTirCat/mas.do",
                type: "POST",
                data: {
                    "action": "update",
                    "m_id": m_id,
                    "m_name": m_name,
                    "m_gui": m_gui,
                    "m_bank_id": m_bank_id,
                    "m_address": m_address,
                    "m_man_id": m_man_id,
                    "m_man_name": m_man_name,
                    "m_email": m_email,
                    "m_phone": m_phone,
                },
                dataType: "json",
                success: function (data) {

                },
                error: function (xhr) {
                    console.log(xhr);
                },
                complete: function (xhr) {
                    console.log(xhr);
                }
            });
        }
	</script>
</body>

</html>